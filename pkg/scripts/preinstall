#!/bin/bash

# Snappy Web Agent Pre-Install Script

BUNDLE_ID="com.snappy.webagent"
PLIST_PATH="/Library/LaunchDaemons/$BUNDLE_ID.plist"

echo "Preparing for Snappy Web Agent installation..."

# Stop existing daemon if running
if launchctl list | grep -q "$BUNDLE_ID"; then
    echo "Stopping existing daemon..."
    launchctl stop "$BUNDLE_ID" 2>/dev/null || true
    launchctl unload "$PLIST_PATH" 2>/dev/null || true
    echo "âœ“ Existing daemon stopped"
fi

exit 0
